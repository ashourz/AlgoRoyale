## service\indicators_service.py
from datetime import datetime
from decimal import Decimal
from src.algo_royale.db.dao.indicators_dao import IndicatorsDAO

class IndicatorsService:
    def __init__(self):
        self.indicators_dao = IndicatorsDAO()

    def create_indicators(self, trade_id: int, rsi: Decimal, macd: Decimal, macd_signal: Decimal, volume: Decimal,
                          bollinger_upper: Decimal, bollinger_lower: Decimal, atr: Decimal, price: Decimal, 
                          ema_short: Decimal, ema_long: Decimal, recorded_at: datetime) -> None:
        """Insert indicators for a specific trade."""
        self.indicators_dao.insert_indicators(trade_id, rsi, macd, macd_signal, volume, bollinger_upper, bollinger_lower,
                                              atr, price, ema_short, ema_long, recorded_at)

    def get_indicators_by_trade_id(self, trade_id: int):
        """Fetch indicators for a trade by trade ID."""
        return self.indicators_dao.fetch_indicators_by_trade_id(trade_id)

    def update_indicators(self, indicator_id: int, rsi: Decimal, macd: Decimal, macd_signal: Decimal, volume: Decimal,
                          bollinger_upper: Decimal, bollinger_lower: Decimal, atr: Decimal, price: Decimal, 
                          ema_short: Decimal, ema_long: Decimal, recorded_at: datetime) -> None:
        """Update existing indicators."""
        self.indicators_dao.update_indicators(indicator_id, rsi, macd, macd_signal, volume, bollinger_upper, 
                                              bollinger_lower, atr, price, ema_short, ema_long, recorded_at)
